## redis

redis 有cluster 和 主从复制两种集群

第一种全量复制，第二种分片储存。redis主从复制数据同步不精准

加锁 setnx timeout

多线程轮redis循加锁会导致网络IO频繁，加上timeout防止获得锁线程挂了造成死锁。此外还应该引入一个监控线程防止线程未完成任务就释放了锁

获得锁的线程应该开一个阻塞队列将没抢到锁的线程放入队列，防止频繁IO

### redlock

客户端代码实现，每个客户端连接多个redis，看看redis返回的加锁结果，如果此线程获得超过半数的锁，就认为获得了锁



