## 结构

1. 魔数（4Bytes）

   - 识别Class文件，安全保障

2. 版本号（4Bytes）

   - 高版本兼容低版本

3. 常量池

   计数器（2Bytes），从1开始

   常量池表cp_info，存放编译时尝生的字面量和符号引用，类加载后会放进运行时常量池
   
4. 访问标识（2Bytes）

   ACC_开头，有PUBLIC、FINAL、SUPER、INTERFACE、ABSTRACT、ENUM、ANNOTATION、SYNTHETIC
   
5. 类索引、父类索引、接口索引集合

6. 字段表集合

   不会出现父类的字段

7. 方法表

   不包括父类继承的方法
   
8. 属性表集合

   ![image-20220329220823425](E:\学习笔记\typora\img\image-20220329220823425.png)



### Class常量池

Class常量池可以理解为是Class文件中的资源仓库。 Class文件中除了包含类的版本、字段、方法、接口等描述信息外，还有一项信息就是常量池(constant pool table)，用于存放编译器生成的各种字面量(Literal)和符号引用(Symbolic References)。

由于不同的Class文件中包含的常量的个数是不固定的，所以在Class文件的常量池入口处会设置两个字节的常量池容量计数器，记录了常量池中常量的个数。

### 运行时常量池

运行时常量池（ Runtime Constant Pool）是每一个类或接口的常量池（ Constant_Pool）的运行时表示形式。

它包括了若干种不同的常量：从编译期可知的数值字面量到必须运行期解析后才能获得的方法或字段引用。运行时常量池扮演了类似传统语言中符号表（ SymbolTable）的角色，不过它存储数据范围比通常意义上的符号表要更为广泛。

每一个运行时常量池都分配在 Java 虚拟机的方法区之中，在类和接口被加载到虚拟机后，对应的运行时常量池就被创建出来。

