**产生条件**

1、互斥使用，即当资源被一个线程使用(占有)时，别的线程不能使用
2、不可抢占，资源请求者不能强制从资源占有者手中夺取资源，资源只能由资源占有者主动释放。
3、请求和保持，即当资源请求者在请求其他的资源的同时保持对原有资源的占有。
4、循环等待，即存在一个等待队列：P1占有P2的资源，P2占有P3的资源，P3占有P1的资源。这样就形成了一个等待环路。

**四个必须全部满足**

![image-20220321133939487](E:\学习笔记\typora\img\image-20220321133939487.png)

如何解决哲学家就餐问题

1. 只有两只筷子都可用时，才允许拿起筷子就餐
2. 取左筷子和取右筷子的动作合并为一个原子操作
3. 奇数号哲学家先拿左再拿右，偶数号则相反
4. 至多有四个哲学家同时进餐

**避免死锁-银行家算法** 
进程提出资源申请时，先预判是否会导致系统进入不安全状态。

![image-20220321170909677](E:\学习笔记\typora\img\image-20220321170909677.png)

**检测-消除死锁**

![image-20220322183647662](E:\学习笔记\typora\img\image-20220322183647662.png)

![image-20220322183933755](E:\学习笔记\typora\img\image-20220322183933755.png)

总结：消除那些不阻塞的节点的所有边，直到无边可消。若不能完全简化，就有死锁

![image-20220322184116549](E:\学习笔记\typora\img\image-20220322184116549.png)
